## Размещение корпуса на сервере

- **linghub.ru**

1. в папке пользователя создать директорию по сокращенному названию корпуса

2. в созданной папке создать две директории: для интерфейса (далее - `/corpus_spoco`) и генератора (далее - `/corpus_data`), закачать в эти папки шаблоны соответствено (ссылки на шаблоны представлены в материалах)

- **parasolcorpus.org**

1. из папки пользователя перейти в корень системы

2. в папке `аdditionaldisk` создать директорию по сокращенному названию корпуса и загрузить в нее генератор

3. вернуться в основноную директорию, перейти в `/var/www/html/`, создать директорию по сокращенному названию корпуса и загрузить в нее интерфейс корпуса

В последующей инструции специфика расположения папок `/corpus_data` и `/corpus_spoco` в зависимости от хостинга не будет упоминаться, но вы должны иметь ее в виду. Это очень важно, так как ошибки в записи путей могут помешать генерации корпуса.

## Подготовка данных

**аудио**

1. названия файлов аудиозаписей не должны содержать символов кроме латиницы, цифр и \_

2. формат - `.wav`, на всех файлах должен быть **low-case**. Пример названия аудиофайла:

`20102018_mgd10.wav`

3. аудиофайлы загрузить в директорию `<...>/data/ENDVERSION`

**аннотации**

1. аннотации к аудиофайлам должны быть конвертированы в формат `.eaf` (elan-файл)

2. названия аннотаций должны совпадать с названиями аудиофайлов, к которым они относятся

3. в каждый элан-файл под тег `<HEADER MEDIA_FILE="" TIME_UNITS="milliseconds">` вручную внести следующую строку, заменив **audio_file_name.wav** имя аудиозаписи, соответствующей данной аннотации:

> <MEDIA_DESCRIPTOR MEDIA_URL="" MIME_TYPE="audio/x-wav" RELATIVE_MEDIA_URL="./**audio_file_name.wav**"/>

4. загрузить элан-файлы в директорию `<...>/data/ELAN-FILES`

**метаданные**

Личные данные консультантов, участвовавших в записи аудиофайлов, нужно скомпоновать в файл `metadata_export.xml` и положить его в корень директории `/corpus_data`. Структура файла должна быть следующей:
```
<meta>
  <person>
    <tag1> ... </tag1>
    <tag2> ... </tag2>
           ...
  <person>
  <person>
    <tag1> ... </tag1>
    <tag2> ... </tag2>
           ...
  </person>
  ...
</meta>
```
Одному тегу должно соответствовать одно поле метаданных (например, год рождения, образование, место рождения и т.д.). Название тегов желательно должно соответствовать содержанию поля, например `<education>` для поля "образование".

Необходимо выбрать 3-6 полей и придумать систему для их краткой унификации - эти поля будут использоваться в поиске. Например, развернутую информацию об образовании сократить до меток "начальное", "среднее", "высшее" и т.д.

Теги выбранных для поиска полей нужно внести в список `metaTags` в файле `add_meta.py` примерно вот так:

`metaTags = ['id', 'string_id', 'sex', 'year_of_birth', 'education', 'russian_age']`

## Материалы

1. [Шаблон интерфейса сайта](https://bitbucket.org/michauw/spoco/src/master/)

2. [Шаблон генератора корпуса](https://drive.google.com/open?id=1V3Wyq3LL7t7b5JxSCtRiOnJ_gYfD8TEz)
